---
title: Contracts
description: Shared API schemas and types using effect/Schema for validation and contract boundaries.
---

# Contracts (`packages/contracts`)

The contracts package defines shared API schemas and types that are consumed by both the API server and client applications. All validation is done with `effect/Schema`. Zod is banned from the project.

## Purpose

Contracts provide a single source of truth for request/response payload shapes, enum types and value sets (such as subscription statuses, invitation statuses, and member roles), and shared type definitions imported by domain and API layers.

## Usage

Contracts are imported by the API routes for request validation and by the domain layer for type definitions:

```typescript
// Used in domain layer
import { type SubscriptionStatus, subscriptionStatuses } from '@tx-agent-kit/contracts'

// Used in API route validation
import { createOrganizationRequestSchema } from '@tx-agent-kit/contracts'
```

## Schema-First Boundaries

The project enforces schema-first validation at all system boundaries. Rather than using raw types, data crossing trust boundaries (API input, database results) must be decoded through `effect/Schema`:

```typescript
import { Schema } from 'effect'

export const subscriptionStatusSchema = Schema.Literal('active', 'inactive', 'trialing', 'past_due', 'canceled', 'paused', 'unpaid')
export type SubscriptionStatus = Schema.Schema.Type<typeof subscriptionStatusSchema>

export const subscriptionStatuses = ['active', 'inactive', 'trialing', 'past_due', 'canceled', 'paused', 'unpaid'] as const
```

## Governance

`effect/Schema` is the only validation library allowed; Zod imports will fail lint checks. Contract types are consumed by `packages/core` domain layers through re-exports. The API server's `openapi.json` is generated from these contract definitions, ensuring the spec always matches the runtime validation.
