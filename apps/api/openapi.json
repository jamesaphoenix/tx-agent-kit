{
  "openapi": "3.1.0",
  "info": {
    "title": "tx-agent-kit API",
    "version": "0.1.0",
    "summary": "Effect-based API for auth, organizations, teams, and invitations.",
    "description": "Contract for apps/api. Domain behavior is modeled as closed invariants at API boundaries."
  },
  "paths": {
    "/health": {
      "get": {
        "tags": [
          "health"
        ],
        "operationId": "health.health",
        "parameters": [],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "status",
                    "timestamp",
                    "service"
                  ],
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "healthy"
                      ]
                    },
                    "timestamp": {
                      "type": "string"
                    },
                    "service": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/auth/sign-up": {
      "post": {
        "tags": [
          "auth"
        ],
        "operationId": "auth.signUp",
        "parameters": [],
        "security": [],
        "responses": {
          "201": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "token",
                    "user"
                  ],
                  "properties": {
                    "token": {
                      "type": "string"
                    },
                    "user": {
                      "type": "object",
                      "required": [
                        "id",
                        "email",
                        "name",
                        "createdAt"
                      ],
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "createdAt": {
                          "type": "string"
                        }
                      },
                      "additionalProperties": false
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password",
                  "name"
                ],
                "properties": {
                  "email": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            }
          },
          "required": true
        },
        "x-invariants": [
          "INV-AUTH-001"
        ]
      }
    },
    "/v1/auth/sign-in": {
      "post": {
        "tags": [
          "auth"
        ],
        "operationId": "auth.signIn",
        "parameters": [],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "token",
                    "user"
                  ],
                  "properties": {
                    "token": {
                      "type": "string"
                    },
                    "user": {
                      "type": "object",
                      "required": [
                        "id",
                        "email",
                        "name",
                        "createdAt"
                      ],
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "createdAt": {
                          "type": "string"
                        }
                      },
                      "additionalProperties": false
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            }
          },
          "required": true
        },
        "x-invariants": [
          "INV-AUTH-001"
        ]
      }
    },
    "/v1/auth/forgot-password": {
      "post": {
        "tags": [
          "auth"
        ],
        "operationId": "auth.forgotPassword",
        "parameters": [],
        "security": [],
        "responses": {
          "202": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "accepted"
                  ],
                  "properties": {
                    "accepted": {
                      "type": "boolean"
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "description": "a string matching the pattern ^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$",
                    "pattern": "^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$"
                  }
                },
                "additionalProperties": false
              }
            }
          },
          "required": true
        },
        "x-invariants": [
          "INV-AUTH-002"
        ]
      }
    },
    "/v1/auth/reset-password": {
      "post": {
        "tags": [
          "auth"
        ],
        "operationId": "auth.resetPassword",
        "parameters": [],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "reset"
                  ],
                  "properties": {
                    "reset": {
                      "type": "boolean"
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "token",
                  "password"
                ],
                "properties": {
                  "token": {
                    "type": "string",
                    "description": "a string at least 1 character(s) long",
                    "title": "minLength(1)",
                    "minLength": 1
                  },
                  "password": {
                    "type": "string",
                    "description": "a string at least 8 character(s) long",
                    "title": "minLength(8)",
                    "minLength": 8
                  }
                },
                "additionalProperties": false
              }
            }
          },
          "required": true
        },
        "x-invariants": [
          "INV-AUTH-001"
        ]
      }
    },
    "/v1/auth/me": {
      "get": {
        "tags": [
          "auth"
        ],
        "operationId": "auth.me",
        "parameters": [],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "userId",
                    "email",
                    "roles"
                  ],
                  "properties": {
                    "userId": {
                      "type": "string"
                    },
                    "email": {
                      "type": "string"
                    },
                    "organizationId": {
                      "type": "string"
                    },
                    "roles": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "auth"
        ],
        "operationId": "auth.deleteMe",
        "parameters": [],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "deleted"
                  ],
                  "properties": {
                    "deleted": {
                      "type": "boolean"
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "x-invariants": [
          "INV-ARCH-001"
        ]
      }
    },
    "/v1/organizations": {
      "get": {
        "tags": [
          "organizations"
        ],
        "operationId": "organizations.listOrganizations",
        "parameters": [
          {
            "name": "cursor",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "required": false
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "required": false
          },
          {
            "name": "sortBy",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "required": false
          },
          {
            "name": "sortOrder",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false
          }
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data",
                    "total",
                    "nextCursor",
                    "prevCursor"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "required": [
                          "id",
                          "name",
                          "billingEmail",
                          "onboardingData",
                          "stripeCustomerId",
                          "stripeSubscriptionId",
                          "stripePaymentMethodId",
                          "creditsBalance",
                          "reservedCredits",
                          "autoRechargeEnabled",
                          "autoRechargeThreshold",
                          "autoRechargeAmount",
                          "isSubscribed",
                          "subscriptionStatus",
                          "subscriptionPlan",
                          "subscriptionStartedAt",
                          "subscriptionEndsAt",
                          "subscriptionCurrentPeriodEnd",
                          "createdAt",
                          "updatedAt"
                        ],
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "billingEmail": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "onboardingData": {
                            "anyOf": [
                              {
                                "type": "object",
                                "required": [
                                  "version",
                                  "status",
                                  "currentStep",
                                  "completedSteps"
                                ],
                                "properties": {
                                  "version": {
                                    "type": "number",
                                    "enum": [
                                      1
                                    ]
                                  },
                                  "status": {
                                    "type": "string",
                                    "enum": [
                                      "in_progress",
                                      "completed"
                                    ]
                                  },
                                  "currentStep": {
                                    "type": "string",
                                    "enum": [
                                      "organization_profile",
                                      "workspace_setup",
                                      "goals",
                                      "completed"
                                    ]
                                  },
                                  "completedSteps": {
                                    "type": "array",
                                    "items": {
                                      "type": "string",
                                      "enum": [
                                        "organization_profile",
                                        "workspace_setup",
                                        "goals",
                                        "completed"
                                      ]
                                    }
                                  },
                                  "organizationProfile": {
                                    "type": "object",
                                    "required": [
                                      "displayName"
                                    ],
                                    "properties": {
                                      "displayName": {
                                        "type": "string",
                                        "description": "a string at most 64 character(s) long",
                                        "title": "maxLength(64)",
                                        "minLength": 2,
                                        "maxLength": 64
                                      }
                                    },
                                    "additionalProperties": false
                                  },
                                  "workspaceProfile": {
                                    "type": "object",
                                    "required": [
                                      "teamName",
                                      "website"
                                    ],
                                    "properties": {
                                      "teamName": {
                                        "type": "string",
                                        "description": "a string at most 64 character(s) long",
                                        "title": "maxLength(64)",
                                        "minLength": 2,
                                        "maxLength": 64
                                      },
                                      "website": {
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "null"
                                          }
                                        ]
                                      }
                                    },
                                    "additionalProperties": false
                                  },
                                  "goals": {
                                    "type": "object",
                                    "required": [
                                      "primaryGoal",
                                      "teamSize"
                                    ],
                                    "properties": {
                                      "primaryGoal": {
                                        "type": "string",
                                        "enum": [
                                          "agent_execution",
                                          "automation",
                                          "analytics",
                                          "internal_tools",
                                          "other"
                                        ]
                                      },
                                      "teamSize": {
                                        "type": "string",
                                        "enum": [
                                          "1-5",
                                          "6-20",
                                          "21-50",
                                          "51+"
                                        ]
                                      }
                                    },
                                    "additionalProperties": false
                                  },
                                  "completedAt": {
                                    "anyOf": [
                                      {
                                        "type": "string"
                                      },
                                      {
                                        "type": "null"
                                      }
                                    ]
                                  }
                                },
                                "additionalProperties": false
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "stripeCustomerId": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "stripeSubscriptionId": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "stripePaymentMethodId": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "creditsBalance": {
                            "type": "number"
                          },
                          "reservedCredits": {
                            "type": "number"
                          },
                          "autoRechargeEnabled": {
                            "type": "boolean"
                          },
                          "autoRechargeThreshold": {
                            "anyOf": [
                              {
                                "type": "number"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "autoRechargeAmount": {
                            "anyOf": [
                              {
                                "type": "number"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "isSubscribed": {
                            "type": "boolean"
                          },
                          "subscriptionStatus": {
                            "type": "string",
                            "enum": [
                              "active",
                              "inactive",
                              "trialing",
                              "past_due",
                              "canceled",
                              "paused",
                              "unpaid"
                            ]
                          },
                          "subscriptionPlan": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "subscriptionStartedAt": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "subscriptionEndsAt": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "subscriptionCurrentPeriodEnd": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "createdAt": {
                            "type": "string"
                          },
                          "updatedAt": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": false
                      }
                    },
                    "total": {
                      "type": "number"
                    },
                    "nextCursor": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "prevCursor": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "organizations"
        ],
        "operationId": "organizations.createOrganization",
        "parameters": [],
        "security": [],
        "responses": {
          "201": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "id",
                    "name",
                    "billingEmail",
                    "onboardingData",
                    "stripeCustomerId",
                    "stripeSubscriptionId",
                    "stripePaymentMethodId",
                    "creditsBalance",
                    "reservedCredits",
                    "autoRechargeEnabled",
                    "autoRechargeThreshold",
                    "autoRechargeAmount",
                    "isSubscribed",
                    "subscriptionStatus",
                    "subscriptionPlan",
                    "subscriptionStartedAt",
                    "subscriptionEndsAt",
                    "subscriptionCurrentPeriodEnd",
                    "createdAt",
                    "updatedAt"
                  ],
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "billingEmail": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "onboardingData": {
                      "anyOf": [
                        {
                          "type": "object",
                          "required": [
                            "version",
                            "status",
                            "currentStep",
                            "completedSteps"
                          ],
                          "properties": {
                            "version": {
                              "type": "number",
                              "enum": [
                                1
                              ]
                            },
                            "status": {
                              "type": "string",
                              "enum": [
                                "in_progress",
                                "completed"
                              ]
                            },
                            "currentStep": {
                              "type": "string",
                              "enum": [
                                "organization_profile",
                                "workspace_setup",
                                "goals",
                                "completed"
                              ]
                            },
                            "completedSteps": {
                              "type": "array",
                              "items": {
                                "type": "string",
                                "enum": [
                                  "organization_profile",
                                  "workspace_setup",
                                  "goals",
                                  "completed"
                                ]
                              }
                            },
                            "organizationProfile": {
                              "type": "object",
                              "required": [
                                "displayName"
                              ],
                              "properties": {
                                "displayName": {
                                  "type": "string",
                                  "description": "a string at most 64 character(s) long",
                                  "title": "maxLength(64)",
                                  "minLength": 2,
                                  "maxLength": 64
                                }
                              },
                              "additionalProperties": false
                            },
                            "workspaceProfile": {
                              "type": "object",
                              "required": [
                                "teamName",
                                "website"
                              ],
                              "properties": {
                                "teamName": {
                                  "type": "string",
                                  "description": "a string at most 64 character(s) long",
                                  "title": "maxLength(64)",
                                  "minLength": 2,
                                  "maxLength": 64
                                },
                                "website": {
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "null"
                                    }
                                  ]
                                }
                              },
                              "additionalProperties": false
                            },
                            "goals": {
                              "type": "object",
                              "required": [
                                "primaryGoal",
                                "teamSize"
                              ],
                              "properties": {
                                "primaryGoal": {
                                  "type": "string",
                                  "enum": [
                                    "agent_execution",
                                    "automation",
                                    "analytics",
                                    "internal_tools",
                                    "other"
                                  ]
                                },
                                "teamSize": {
                                  "type": "string",
                                  "enum": [
                                    "1-5",
                                    "6-20",
                                    "21-50",
                                    "51+"
                                  ]
                                }
                              },
                              "additionalProperties": false
                            },
                            "completedAt": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            }
                          },
                          "additionalProperties": false
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "stripeCustomerId": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "stripeSubscriptionId": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "stripePaymentMethodId": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "creditsBalance": {
                      "type": "number"
                    },
                    "reservedCredits": {
                      "type": "number"
                    },
                    "autoRechargeEnabled": {
                      "type": "boolean"
                    },
                    "autoRechargeThreshold": {
                      "anyOf": [
                        {
                          "type": "number"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "autoRechargeAmount": {
                      "anyOf": [
                        {
                          "type": "number"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "isSubscribed": {
                      "type": "boolean"
                    },
                    "subscriptionStatus": {
                      "type": "string",
                      "enum": [
                        "active",
                        "inactive",
                        "trialing",
                        "past_due",
                        "canceled",
                        "paused",
                        "unpaid"
                      ]
                    },
                    "subscriptionPlan": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "subscriptionStartedAt": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "subscriptionEndsAt": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "subscriptionCurrentPeriodEnd": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "createdAt": {
                      "type": "string"
                    },
                    "updatedAt": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name"
                ],
                "properties": {
                  "name": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            }
          },
          "required": true
        }
      }
    },
    "/v1/organizations/{organizationId}": {
      "get": {
        "tags": [
          "organizations"
        ],
        "operationId": "organizations.getOrganization",
        "parameters": [
          {
            "name": "organizationId",
            "in": "path",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "id",
                    "name",
                    "billingEmail",
                    "onboardingData",
                    "stripeCustomerId",
                    "stripeSubscriptionId",
                    "stripePaymentMethodId",
                    "creditsBalance",
                    "reservedCredits",
                    "autoRechargeEnabled",
                    "autoRechargeThreshold",
                    "autoRechargeAmount",
                    "isSubscribed",
                    "subscriptionStatus",
                    "subscriptionPlan",
                    "subscriptionStartedAt",
                    "subscriptionEndsAt",
                    "subscriptionCurrentPeriodEnd",
                    "createdAt",
                    "updatedAt"
                  ],
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "billingEmail": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "onboardingData": {
                      "anyOf": [
                        {
                          "type": "object",
                          "required": [
                            "version",
                            "status",
                            "currentStep",
                            "completedSteps"
                          ],
                          "properties": {
                            "version": {
                              "type": "number",
                              "enum": [
                                1
                              ]
                            },
                            "status": {
                              "type": "string",
                              "enum": [
                                "in_progress",
                                "completed"
                              ]
                            },
                            "currentStep": {
                              "type": "string",
                              "enum": [
                                "organization_profile",
                                "workspace_setup",
                                "goals",
                                "completed"
                              ]
                            },
                            "completedSteps": {
                              "type": "array",
                              "items": {
                                "type": "string",
                                "enum": [
                                  "organization_profile",
                                  "workspace_setup",
                                  "goals",
                                  "completed"
                                ]
                              }
                            },
                            "organizationProfile": {
                              "type": "object",
                              "required": [
                                "displayName"
                              ],
                              "properties": {
                                "displayName": {
                                  "type": "string",
                                  "description": "a string at most 64 character(s) long",
                                  "title": "maxLength(64)",
                                  "minLength": 2,
                                  "maxLength": 64
                                }
                              },
                              "additionalProperties": false
                            },
                            "workspaceProfile": {
                              "type": "object",
                              "required": [
                                "teamName",
                                "website"
                              ],
                              "properties": {
                                "teamName": {
                                  "type": "string",
                                  "description": "a string at most 64 character(s) long",
                                  "title": "maxLength(64)",
                                  "minLength": 2,
                                  "maxLength": 64
                                },
                                "website": {
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "null"
                                    }
                                  ]
                                }
                              },
                              "additionalProperties": false
                            },
                            "goals": {
                              "type": "object",
                              "required": [
                                "primaryGoal",
                                "teamSize"
                              ],
                              "properties": {
                                "primaryGoal": {
                                  "type": "string",
                                  "enum": [
                                    "agent_execution",
                                    "automation",
                                    "analytics",
                                    "internal_tools",
                                    "other"
                                  ]
                                },
                                "teamSize": {
                                  "type": "string",
                                  "enum": [
                                    "1-5",
                                    "6-20",
                                    "21-50",
                                    "51+"
                                  ]
                                }
                              },
                              "additionalProperties": false
                            },
                            "completedAt": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            }
                          },
                          "additionalProperties": false
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "stripeCustomerId": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "stripeSubscriptionId": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "stripePaymentMethodId": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "creditsBalance": {
                      "type": "number"
                    },
                    "reservedCredits": {
                      "type": "number"
                    },
                    "autoRechargeEnabled": {
                      "type": "boolean"
                    },
                    "autoRechargeThreshold": {
                      "anyOf": [
                        {
                          "type": "number"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "autoRechargeAmount": {
                      "anyOf": [
                        {
                          "type": "number"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "isSubscribed": {
                      "type": "boolean"
                    },
                    "subscriptionStatus": {
                      "type": "string",
                      "enum": [
                        "active",
                        "inactive",
                        "trialing",
                        "past_due",
                        "canceled",
                        "paused",
                        "unpaid"
                      ]
                    },
                    "subscriptionPlan": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "subscriptionStartedAt": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "subscriptionEndsAt": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "subscriptionCurrentPeriodEnd": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "createdAt": {
                      "type": "string"
                    },
                    "updatedAt": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "organizations"
        ],
        "operationId": "organizations.updateOrganization",
        "parameters": [
          {
            "name": "organizationId",
            "in": "path",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "id",
                    "name",
                    "billingEmail",
                    "onboardingData",
                    "stripeCustomerId",
                    "stripeSubscriptionId",
                    "stripePaymentMethodId",
                    "creditsBalance",
                    "reservedCredits",
                    "autoRechargeEnabled",
                    "autoRechargeThreshold",
                    "autoRechargeAmount",
                    "isSubscribed",
                    "subscriptionStatus",
                    "subscriptionPlan",
                    "subscriptionStartedAt",
                    "subscriptionEndsAt",
                    "subscriptionCurrentPeriodEnd",
                    "createdAt",
                    "updatedAt"
                  ],
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "billingEmail": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "onboardingData": {
                      "anyOf": [
                        {
                          "type": "object",
                          "required": [
                            "version",
                            "status",
                            "currentStep",
                            "completedSteps"
                          ],
                          "properties": {
                            "version": {
                              "type": "number",
                              "enum": [
                                1
                              ]
                            },
                            "status": {
                              "type": "string",
                              "enum": [
                                "in_progress",
                                "completed"
                              ]
                            },
                            "currentStep": {
                              "type": "string",
                              "enum": [
                                "organization_profile",
                                "workspace_setup",
                                "goals",
                                "completed"
                              ]
                            },
                            "completedSteps": {
                              "type": "array",
                              "items": {
                                "type": "string",
                                "enum": [
                                  "organization_profile",
                                  "workspace_setup",
                                  "goals",
                                  "completed"
                                ]
                              }
                            },
                            "organizationProfile": {
                              "type": "object",
                              "required": [
                                "displayName"
                              ],
                              "properties": {
                                "displayName": {
                                  "type": "string",
                                  "description": "a string at most 64 character(s) long",
                                  "title": "maxLength(64)",
                                  "minLength": 2,
                                  "maxLength": 64
                                }
                              },
                              "additionalProperties": false
                            },
                            "workspaceProfile": {
                              "type": "object",
                              "required": [
                                "teamName",
                                "website"
                              ],
                              "properties": {
                                "teamName": {
                                  "type": "string",
                                  "description": "a string at most 64 character(s) long",
                                  "title": "maxLength(64)",
                                  "minLength": 2,
                                  "maxLength": 64
                                },
                                "website": {
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "null"
                                    }
                                  ]
                                }
                              },
                              "additionalProperties": false
                            },
                            "goals": {
                              "type": "object",
                              "required": [
                                "primaryGoal",
                                "teamSize"
                              ],
                              "properties": {
                                "primaryGoal": {
                                  "type": "string",
                                  "enum": [
                                    "agent_execution",
                                    "automation",
                                    "analytics",
                                    "internal_tools",
                                    "other"
                                  ]
                                },
                                "teamSize": {
                                  "type": "string",
                                  "enum": [
                                    "1-5",
                                    "6-20",
                                    "21-50",
                                    "51+"
                                  ]
                                }
                              },
                              "additionalProperties": false
                            },
                            "completedAt": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            }
                          },
                          "additionalProperties": false
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "stripeCustomerId": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "stripeSubscriptionId": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "stripePaymentMethodId": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "creditsBalance": {
                      "type": "number"
                    },
                    "reservedCredits": {
                      "type": "number"
                    },
                    "autoRechargeEnabled": {
                      "type": "boolean"
                    },
                    "autoRechargeThreshold": {
                      "anyOf": [
                        {
                          "type": "number"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "autoRechargeAmount": {
                      "anyOf": [
                        {
                          "type": "number"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "isSubscribed": {
                      "type": "boolean"
                    },
                    "subscriptionStatus": {
                      "type": "string",
                      "enum": [
                        "active",
                        "inactive",
                        "trialing",
                        "past_due",
                        "canceled",
                        "paused",
                        "unpaid"
                      ]
                    },
                    "subscriptionPlan": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "subscriptionStartedAt": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "subscriptionEndsAt": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "subscriptionCurrentPeriodEnd": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "createdAt": {
                      "type": "string"
                    },
                    "updatedAt": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [],
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "onboardingData": {
                    "anyOf": [
                      {
                        "type": "object",
                        "required": [
                          "version",
                          "status",
                          "currentStep",
                          "completedSteps"
                        ],
                        "properties": {
                          "version": {
                            "type": "number",
                            "enum": [
                              1
                            ]
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "in_progress",
                              "completed"
                            ]
                          },
                          "currentStep": {
                            "type": "string",
                            "enum": [
                              "organization_profile",
                              "workspace_setup",
                              "goals",
                              "completed"
                            ]
                          },
                          "completedSteps": {
                            "type": "array",
                            "items": {
                              "type": "string",
                              "enum": [
                                "organization_profile",
                                "workspace_setup",
                                "goals",
                                "completed"
                              ]
                            }
                          },
                          "organizationProfile": {
                            "type": "object",
                            "required": [
                              "displayName"
                            ],
                            "properties": {
                              "displayName": {
                                "type": "string",
                                "description": "a string at most 64 character(s) long",
                                "title": "maxLength(64)",
                                "minLength": 2,
                                "maxLength": 64
                              }
                            },
                            "additionalProperties": false
                          },
                          "workspaceProfile": {
                            "type": "object",
                            "required": [
                              "teamName",
                              "website"
                            ],
                            "properties": {
                              "teamName": {
                                "type": "string",
                                "description": "a string at most 64 character(s) long",
                                "title": "maxLength(64)",
                                "minLength": 2,
                                "maxLength": 64
                              },
                              "website": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            },
                            "additionalProperties": false
                          },
                          "goals": {
                            "type": "object",
                            "required": [
                              "primaryGoal",
                              "teamSize"
                            ],
                            "properties": {
                              "primaryGoal": {
                                "type": "string",
                                "enum": [
                                  "agent_execution",
                                  "automation",
                                  "analytics",
                                  "internal_tools",
                                  "other"
                                ]
                              },
                              "teamSize": {
                                "type": "string",
                                "enum": [
                                  "1-5",
                                  "6-20",
                                  "21-50",
                                  "51+"
                                ]
                              }
                            },
                            "additionalProperties": false
                          },
                          "completedAt": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          }
                        },
                        "additionalProperties": false
                      },
                      {
                        "type": "null"
                      }
                    ]
                  }
                },
                "additionalProperties": false
              }
            }
          },
          "required": true
        }
      },
      "delete": {
        "tags": [
          "organizations"
        ],
        "operationId": "organizations.removeOrganization",
        "parameters": [
          {
            "name": "organizationId",
            "in": "path",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "deleted"
                  ],
                  "properties": {
                    "deleted": {
                      "type": "boolean"
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/organizations/batch/get-many": {
      "post": {
        "tags": [
          "organizations"
        ],
        "operationId": "organizations.getManyOrganizations",
        "parameters": [],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "required": [
                          "id",
                          "name",
                          "billingEmail",
                          "onboardingData",
                          "stripeCustomerId",
                          "stripeSubscriptionId",
                          "stripePaymentMethodId",
                          "creditsBalance",
                          "reservedCredits",
                          "autoRechargeEnabled",
                          "autoRechargeThreshold",
                          "autoRechargeAmount",
                          "isSubscribed",
                          "subscriptionStatus",
                          "subscriptionPlan",
                          "subscriptionStartedAt",
                          "subscriptionEndsAt",
                          "subscriptionCurrentPeriodEnd",
                          "createdAt",
                          "updatedAt"
                        ],
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "billingEmail": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "onboardingData": {
                            "anyOf": [
                              {
                                "type": "object",
                                "required": [
                                  "version",
                                  "status",
                                  "currentStep",
                                  "completedSteps"
                                ],
                                "properties": {
                                  "version": {
                                    "type": "number",
                                    "enum": [
                                      1
                                    ]
                                  },
                                  "status": {
                                    "type": "string",
                                    "enum": [
                                      "in_progress",
                                      "completed"
                                    ]
                                  },
                                  "currentStep": {
                                    "type": "string",
                                    "enum": [
                                      "organization_profile",
                                      "workspace_setup",
                                      "goals",
                                      "completed"
                                    ]
                                  },
                                  "completedSteps": {
                                    "type": "array",
                                    "items": {
                                      "type": "string",
                                      "enum": [
                                        "organization_profile",
                                        "workspace_setup",
                                        "goals",
                                        "completed"
                                      ]
                                    }
                                  },
                                  "organizationProfile": {
                                    "type": "object",
                                    "required": [
                                      "displayName"
                                    ],
                                    "properties": {
                                      "displayName": {
                                        "type": "string",
                                        "description": "a string at most 64 character(s) long",
                                        "title": "maxLength(64)",
                                        "minLength": 2,
                                        "maxLength": 64
                                      }
                                    },
                                    "additionalProperties": false
                                  },
                                  "workspaceProfile": {
                                    "type": "object",
                                    "required": [
                                      "teamName",
                                      "website"
                                    ],
                                    "properties": {
                                      "teamName": {
                                        "type": "string",
                                        "description": "a string at most 64 character(s) long",
                                        "title": "maxLength(64)",
                                        "minLength": 2,
                                        "maxLength": 64
                                      },
                                      "website": {
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "null"
                                          }
                                        ]
                                      }
                                    },
                                    "additionalProperties": false
                                  },
                                  "goals": {
                                    "type": "object",
                                    "required": [
                                      "primaryGoal",
                                      "teamSize"
                                    ],
                                    "properties": {
                                      "primaryGoal": {
                                        "type": "string",
                                        "enum": [
                                          "agent_execution",
                                          "automation",
                                          "analytics",
                                          "internal_tools",
                                          "other"
                                        ]
                                      },
                                      "teamSize": {
                                        "type": "string",
                                        "enum": [
                                          "1-5",
                                          "6-20",
                                          "21-50",
                                          "51+"
                                        ]
                                      }
                                    },
                                    "additionalProperties": false
                                  },
                                  "completedAt": {
                                    "anyOf": [
                                      {
                                        "type": "string"
                                      },
                                      {
                                        "type": "null"
                                      }
                                    ]
                                  }
                                },
                                "additionalProperties": false
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "stripeCustomerId": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "stripeSubscriptionId": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "stripePaymentMethodId": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "creditsBalance": {
                            "type": "number"
                          },
                          "reservedCredits": {
                            "type": "number"
                          },
                          "autoRechargeEnabled": {
                            "type": "boolean"
                          },
                          "autoRechargeThreshold": {
                            "anyOf": [
                              {
                                "type": "number"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "autoRechargeAmount": {
                            "anyOf": [
                              {
                                "type": "number"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "isSubscribed": {
                            "type": "boolean"
                          },
                          "subscriptionStatus": {
                            "type": "string",
                            "enum": [
                              "active",
                              "inactive",
                              "trialing",
                              "past_due",
                              "canceled",
                              "paused",
                              "unpaid"
                            ]
                          },
                          "subscriptionPlan": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "subscriptionStartedAt": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "subscriptionEndsAt": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "subscriptionCurrentPeriodEnd": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "createdAt": {
                            "type": "string"
                          },
                          "updatedAt": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": false
                      }
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "ids"
                ],
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/UUID"
                    }
                  }
                },
                "additionalProperties": false
              }
            }
          },
          "required": true
        },
        "x-invariants": [
          "INV-ORG-001"
        ]
      }
    },
    "/v1/invitations": {
      "get": {
        "tags": [
          "organizations"
        ],
        "operationId": "organizations.listInvitations",
        "parameters": [
          {
            "name": "cursor",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "required": false
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "required": false
          },
          {
            "name": "sortBy",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "required": false
          },
          {
            "name": "sortOrder",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false
          },
          {
            "name": "filter[status]",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "required": false
          },
          {
            "name": "filter[role]",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "required": false
          }
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data",
                    "total",
                    "nextCursor",
                    "prevCursor"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "required": [
                          "id",
                          "organizationId",
                          "email",
                          "role",
                          "status",
                          "invitedByUserId",
                          "token",
                          "expiresAt",
                          "createdAt"
                        ],
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "organizationId": {
                            "type": "string"
                          },
                          "email": {
                            "type": "string"
                          },
                          "role": {
                            "type": "string",
                            "enum": [
                              "admin",
                              "member"
                            ]
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "pending",
                              "accepted",
                              "revoked",
                              "expired"
                            ]
                          },
                          "invitedByUserId": {
                            "type": "string"
                          },
                          "token": {
                            "type": "string"
                          },
                          "expiresAt": {
                            "type": "string"
                          },
                          "createdAt": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": false
                      }
                    },
                    "total": {
                      "type": "number"
                    },
                    "nextCursor": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "prevCursor": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "x-invariants": [
          "INV-INV-002"
        ]
      },
      "post": {
        "tags": [
          "organizations"
        ],
        "operationId": "organizations.createInvitation",
        "parameters": [],
        "security": [],
        "responses": {
          "201": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "id",
                    "organizationId",
                    "email",
                    "role",
                    "status",
                    "invitedByUserId",
                    "token",
                    "expiresAt",
                    "createdAt"
                  ],
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "organizationId": {
                      "type": "string"
                    },
                    "email": {
                      "type": "string"
                    },
                    "role": {
                      "type": "string",
                      "enum": [
                        "admin",
                        "member"
                      ]
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "pending",
                        "accepted",
                        "revoked",
                        "expired"
                      ]
                    },
                    "invitedByUserId": {
                      "type": "string"
                    },
                    "token": {
                      "type": "string"
                    },
                    "expiresAt": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "organizationId",
                  "email",
                  "role"
                ],
                "properties": {
                  "organizationId": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "admin",
                      "member"
                    ]
                  }
                },
                "additionalProperties": false
              }
            }
          },
          "required": true
        },
        "x-invariants": [
          "INV-ORG-001"
        ]
      }
    },
    "/v1/invitations/{invitationId}": {
      "get": {
        "tags": [
          "organizations"
        ],
        "operationId": "organizations.getInvitation",
        "parameters": [
          {
            "name": "invitationId",
            "in": "path",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "id",
                    "organizationId",
                    "email",
                    "role",
                    "status",
                    "invitedByUserId",
                    "token",
                    "expiresAt",
                    "createdAt"
                  ],
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "organizationId": {
                      "type": "string"
                    },
                    "email": {
                      "type": "string"
                    },
                    "role": {
                      "type": "string",
                      "enum": [
                        "admin",
                        "member"
                      ]
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "pending",
                        "accepted",
                        "revoked",
                        "expired"
                      ]
                    },
                    "invitedByUserId": {
                      "type": "string"
                    },
                    "token": {
                      "type": "string"
                    },
                    "expiresAt": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "x-invariants": [
          "INV-INV-002"
        ]
      },
      "patch": {
        "tags": [
          "organizations"
        ],
        "operationId": "organizations.updateInvitation",
        "parameters": [
          {
            "name": "invitationId",
            "in": "path",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "id",
                    "organizationId",
                    "email",
                    "role",
                    "status",
                    "invitedByUserId",
                    "token",
                    "expiresAt",
                    "createdAt"
                  ],
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "organizationId": {
                      "type": "string"
                    },
                    "email": {
                      "type": "string"
                    },
                    "role": {
                      "type": "string",
                      "enum": [
                        "admin",
                        "member"
                      ]
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "pending",
                        "accepted",
                        "revoked",
                        "expired"
                      ]
                    },
                    "invitedByUserId": {
                      "type": "string"
                    },
                    "token": {
                      "type": "string"
                    },
                    "expiresAt": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [],
                "properties": {
                  "role": {
                    "type": "string",
                    "enum": [
                      "admin",
                      "member"
                    ]
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "pending",
                      "accepted",
                      "revoked",
                      "expired"
                    ]
                  }
                },
                "additionalProperties": false
              }
            }
          },
          "required": true
        },
        "x-invariants": [
          "INV-ORG-001"
        ]
      },
      "delete": {
        "tags": [
          "organizations"
        ],
        "operationId": "organizations.removeInvitation",
        "parameters": [
          {
            "name": "invitationId",
            "in": "path",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "deleted"
                  ],
                  "properties": {
                    "deleted": {
                      "type": "boolean"
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "x-invariants": [
          "INV-ORG-001"
        ]
      }
    },
    "/v1/invitations/batch/get-many": {
      "post": {
        "tags": [
          "organizations"
        ],
        "operationId": "organizations.getManyInvitations",
        "parameters": [],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "required": [
                          "id",
                          "organizationId",
                          "email",
                          "role",
                          "status",
                          "invitedByUserId",
                          "token",
                          "expiresAt",
                          "createdAt"
                        ],
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "organizationId": {
                            "type": "string"
                          },
                          "email": {
                            "type": "string"
                          },
                          "role": {
                            "type": "string",
                            "enum": [
                              "admin",
                              "member"
                            ]
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "pending",
                              "accepted",
                              "revoked",
                              "expired"
                            ]
                          },
                          "invitedByUserId": {
                            "type": "string"
                          },
                          "token": {
                            "type": "string"
                          },
                          "expiresAt": {
                            "type": "string"
                          },
                          "createdAt": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": false
                      }
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "ids"
                ],
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/UUID"
                    }
                  }
                },
                "additionalProperties": false
              }
            }
          },
          "required": true
        },
        "x-invariants": [
          "INV-INV-002"
        ]
      }
    },
    "/v1/invitations/{token}/accept": {
      "post": {
        "tags": [
          "organizations"
        ],
        "operationId": "organizations.acceptInvitation",
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "accepted"
                  ],
                  "properties": {
                    "accepted": {
                      "type": "boolean"
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "x-invariants": [
          "INV-INV-001"
        ]
      }
    },
    "/v1/teams": {
      "get": {
        "tags": [
          "teams"
        ],
        "operationId": "teams.listTeams",
        "parameters": [
          {
            "name": "organizationId",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "required": true
          },
          {
            "name": "cursor",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "required": false
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "required": false
          },
          {
            "name": "sortBy",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "required": false
          },
          {
            "name": "sortOrder",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "required": false
          }
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data",
                    "total",
                    "nextCursor",
                    "prevCursor"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "required": [
                          "id",
                          "organizationId",
                          "name",
                          "website",
                          "createdAt",
                          "updatedAt"
                        ],
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "organizationId": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "website": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "createdAt": {
                            "type": "string"
                          },
                          "updatedAt": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": false
                      }
                    },
                    "total": {
                      "type": "number"
                    },
                    "nextCursor": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "prevCursor": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "x-invariants": [
          "INV-ORG-001"
        ]
      },
      "post": {
        "tags": [
          "teams"
        ],
        "operationId": "teams.createTeam",
        "parameters": [],
        "security": [],
        "responses": {
          "201": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "id",
                    "organizationId",
                    "name",
                    "website",
                    "createdAt",
                    "updatedAt"
                  ],
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "organizationId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "website": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "createdAt": {
                      "type": "string"
                    },
                    "updatedAt": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "organizationId",
                  "name"
                ],
                "properties": {
                  "organizationId": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            }
          },
          "required": true
        },
        "x-invariants": [
          "INV-ORG-001"
        ]
      }
    },
    "/v1/teams/{teamId}": {
      "get": {
        "tags": [
          "teams"
        ],
        "operationId": "teams.getTeam",
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "id",
                    "organizationId",
                    "name",
                    "website",
                    "createdAt",
                    "updatedAt"
                  ],
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "organizationId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "website": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "createdAt": {
                      "type": "string"
                    },
                    "updatedAt": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "x-invariants": [
          "INV-ORG-001"
        ]
      },
      "patch": {
        "tags": [
          "teams"
        ],
        "operationId": "teams.updateTeam",
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "id",
                    "organizationId",
                    "name",
                    "website",
                    "createdAt",
                    "updatedAt"
                  ],
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "organizationId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "website": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "createdAt": {
                      "type": "string"
                    },
                    "updatedAt": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [],
                "properties": {
                  "name": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            }
          },
          "required": true
        },
        "x-invariants": [
          "INV-ORG-001"
        ]
      },
      "delete": {
        "tags": [
          "teams"
        ],
        "operationId": "teams.removeTeam",
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "deleted"
                  ],
                  "properties": {
                    "deleted": {
                      "type": "boolean"
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          },
          "400": {
            "description": "The request did not match the expected schema",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/HttpApiDecodeError"
                    },
                    {
                      "$ref": "#/components/schemas/BadRequest"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "NotFound",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conflict"
                }
              }
            }
          },
          "500": {
            "description": "InternalError",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalError"
                }
              }
            }
          }
        },
        "x-invariants": [
          "INV-ORG-001"
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "HttpApiDecodeError": {
        "type": "object",
        "required": [
          "issues",
          "message",
          "_tag"
        ],
        "properties": {
          "issues": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Issue"
            }
          },
          "message": {
            "type": "string"
          },
          "_tag": {
            "type": "string",
            "enum": [
              "HttpApiDecodeError"
            ]
          }
        },
        "additionalProperties": false,
        "description": "The request did not match the expected schema"
      },
      "Issue": {
        "type": "object",
        "required": [
          "_tag",
          "path",
          "message"
        ],
        "properties": {
          "_tag": {
            "type": "string",
            "enum": [
              "Pointer",
              "Unexpected",
              "Missing",
              "Composite",
              "Refinement",
              "Transformation",
              "Type",
              "Forbidden"
            ],
            "description": "The tag identifying the type of parse issue"
          },
          "path": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PropertyKey"
            },
            "description": "The path to the property where the issue occurred"
          },
          "message": {
            "type": "string",
            "description": "A descriptive message explaining the issue"
          }
        },
        "additionalProperties": false,
        "description": "Represents an error encountered while parsing a value to match the schema"
      },
      "PropertyKey": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "number"
          },
          {
            "type": "object",
            "required": [
              "_tag",
              "key"
            ],
            "properties": {
              "_tag": {
                "type": "string",
                "enum": [
                  "symbol"
                ]
              },
              "key": {
                "type": "string"
              }
            },
            "additionalProperties": false,
            "description": "an object to be decoded into a globally shared symbol"
          }
        ]
      },
      "BadRequest": {
        "type": "object",
        "required": [
          "message",
          "_tag"
        ],
        "properties": {
          "message": {
            "type": "string"
          },
          "_tag": {
            "type": "string",
            "enum": [
              "BadRequest"
            ]
          }
        },
        "additionalProperties": false
      },
      "Unauthorized": {
        "type": "object",
        "required": [
          "message",
          "_tag"
        ],
        "properties": {
          "message": {
            "type": "string"
          },
          "_tag": {
            "type": "string",
            "enum": [
              "Unauthorized"
            ]
          }
        },
        "additionalProperties": false
      },
      "NotFound": {
        "type": "object",
        "required": [
          "message",
          "_tag"
        ],
        "properties": {
          "message": {
            "type": "string"
          },
          "_tag": {
            "type": "string",
            "enum": [
              "NotFound"
            ]
          }
        },
        "additionalProperties": false
      },
      "Conflict": {
        "type": "object",
        "required": [
          "message",
          "_tag"
        ],
        "properties": {
          "message": {
            "type": "string"
          },
          "_tag": {
            "type": "string",
            "enum": [
              "Conflict"
            ]
          }
        },
        "additionalProperties": false
      },
      "InternalError": {
        "type": "object",
        "required": [
          "message",
          "_tag"
        ],
        "properties": {
          "message": {
            "type": "string"
          },
          "_tag": {
            "type": "string",
            "enum": [
              "InternalError"
            ]
          }
        },
        "additionalProperties": false
      },
      "UUID": {
        "type": "string",
        "description": "a Universally Unique Identifier",
        "format": "uuid",
        "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
      }
    },
    "securitySchemes": {}
  },
  "security": [],
  "tags": [
    {
      "name": "health"
    },
    {
      "name": "auth"
    },
    {
      "name": "organizations"
    },
    {
      "name": "teams"
    }
  ],
  "servers": [
    {
      "url": "http://localhost:4000",
      "description": "Local development API"
    }
  ],
  "x-ddd": {
    "boundedContexts": [
      {
        "name": "IdentityAccess",
        "owns": [
          "Sign up/sign in",
          "Session token principal"
        ]
      },
      {
        "name": "Collaboration",
        "owns": [
          "Organizations",
          "Teams",
          "Invitations",
          "Membership"
        ]
      }
    ],
    "closedInvariants": [
      {
        "id": "INV-AUTH-001",
        "rule": "Password must be at least 8 characters."
      },
      {
        "id": "INV-AUTH-002",
        "rule": "Forgot-password responses are account-enumeration safe."
      },
      {
        "id": "INV-ORG-001",
        "rule": "Organization members are the only actors allowed to manage resources in that organization."
      },
      {
        "id": "INV-INV-001",
        "rule": "Invitations can be accepted only when status is pending, not expired, and email matches authenticated principal."
      },
      {
        "id": "INV-INV-002",
        "rule": "Invitation list visibility is scoped to invitations whose email matches the authenticated principal."
      },
      {
        "id": "INV-ARCH-001",
        "rule": "Domain mutations are accepted only via API/application services; direct UI-to-DB writes are forbidden."
      }
    ]
  }
}
