---
title: API Reference
description: Auto-generated API reference from the OpenAPI specification
---

The API reference documentation is auto-generated from the OpenAPI specification at `apps/api/openapi.json`. This specification is the single source of truth for all API endpoints, request/response schemas, and authentication requirements.

## Regenerating the docs

When API routes change, regenerate the OpenAPI spec and API reference docs:

```bash
# Regenerate OpenAPI spec from API routes
pnpm openapi:generate

# Regenerate API reference MDX files from the spec
pnpm docs:api:generate
```

The `openapi:generate` command introspects the Effect HttpApi route definitions in `apps/api` and produces an updated `apps/api/openapi.json`. The `docs:api:generate` command then reads this spec and generates MDX documentation files.

## Runtime docs endpoints

When the API server is running (default `http://localhost:4000`), it also exposes:

- Swagger UI at `/docs`
- Raw OpenAPI JSON at `/openapi.json`

The runtime `/openapi.json` powers `/docs` and reflects the running server. The generated `apps/api/openapi.json` is the checked-in artifact used by `pnpm docs:api:generate` and other repo tooling.

## Endpoint groups

The API is organized into four endpoint groups:

### Auth (`/v1/auth/*`)

Auth routes use the `custom` kind marker, meaning domain-specific operations rather than standard CRUD.

| Method | Path | Description |
|--------|------|-------------|
| `POST` | `/v1/auth/sign-up` | Register a new user and return a session |
| `POST` | `/v1/auth/sign-in` | Authenticate and return a JWT |
| `GET` | `/v1/auth/me` | Get the current authenticated user |
| `DELETE` | `/v1/auth/me` | Delete the authenticated user |

### Organizations (`/v1/organizations/*`)

Organization routes use the `crud` kind marker and expose the full CRUD surface.

| Method | Path | Description |
|--------|------|-------------|
| `GET` | `/v1/organizations` | List organizations for the current user (paginated) |
| `GET` | `/v1/organizations/:id` | Get a single organization by ID |
| `POST` | `/v1/organizations/many` | Get multiple organizations by IDs |
| `POST` | `/v1/organizations` | Create an organization |
| `PATCH` | `/v1/organizations/:id` | Update an organization |
| `DELETE` | `/v1/organizations/:id` | Remove an organization |

### Invitations (`/v1/invitations/*`)

Invitation routes include idempotent acceptance.

| Method | Path | Description |
|--------|------|-------------|
| `GET` | `/v1/invitations` | List invitations for the current user |
| `GET` | `/v1/invitations/:id` | Get a single invitation |
| `POST` | `/v1/invitations` | Create an invitation |
| `PATCH` | `/v1/invitations/:id` | Update an invitation |
| `DELETE` | `/v1/invitations/:id` | Remove an invitation |
| `POST` | `/v1/invitations/accept/:token` | Accept an invitation (idempotent) |

## Authentication

All endpoints except `/v1/auth/sign-up`, `/v1/auth/sign-in`, and `/health` require a Bearer JWT token in the `Authorization` header:

```
Authorization: Bearer <jwt-token>
```

Tokens are returned by the sign-up and sign-in endpoints.

## Health check

```
GET /health
```

Returns `{ "status": "healthy" }` with a 200 status code. This endpoint is used by Docker health checks and deployment smoke tests.

## Paginated responses

List endpoints support cursor-based pagination with `limit` and `cursor` query parameters. Responses include a `nextCursor` field when more results are available:

```json
{
  "data": [...],
  "nextCursor": "abc123"
}
```

## OpenAPI spec location

The generated OpenAPI spec in the repository lives at:

```
apps/api/openapi.json
```

This file is generated, not hand-written. Do not edit it directly --- changes will be overwritten by `pnpm openapi:generate`. For runtime inspection, use `/openapi.json` on the API server.
